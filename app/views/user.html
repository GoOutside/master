
<div class="html_user" >
<div>
      <article class="user_home">
        <section class="user_side_menu">
          <section class="user_stats">
            <img src="http://i.imgur.com/rbcoO4a.jpg" class="user_photo">
            <h3 ng-click="signout()">Hello, </h3>
            <h5>Hikes Completed:</h5>
            <h5>Member Since: </h5>
          </section>
          <section class="user_list">
            <ul>
              <li>
                <a href="">Favorites</a>
              </li>
              <li>
                <a href="">Recomended</a>
              </li>
              <li>
                <a href="">Blah</a>
              </li>
              <li>
                <a href="">Blah</a>
              </li>
              <li>
                <a href="">Blah</a>
              </li>
              <li>
                <a href="">Blah</a>
              </li>
            </ul>
          </section>
        </section>
        <section class="activity_location">
          <div>
            <button class="menu-link icon-menu_logo_button"></button>
          </div>
          <div class="activity_map" ng-click="mapFunction()">

          
            
            
          <ng-controller="DemoController">
            <leaflet width="640px" height="480px" center="london" defaults="defaults" markers="markers"></leaflet>
          </ng-controller>
            
          

          </div>
          <section class="activity_list">
            <div class="activity_list_item">
              <div class="activity_list_item_top">
                <a href="" class="icon-GoOutsideLogo">

                </a>
                <h1 class="pull-me">This Is a Test Title for Hike</h1>
                <div class="rating" data-rate="5">
                  <i class="star-1">★</i>
                  <i class="star-2">★</i>
                  <i class="star-3">★</i>
                  <i class="star-4">★</i>
                  <i class="star-5">★</i>
                </div>
              </div>
              <div class="panel">
                <ul>
                  <li>
                    <p>This is a brief description of a hike and what it's all about</p>

                  </li>
                </ul>
              </div>
            </div>
            <div class="activity_list_item">
              <div class="activity_list_item_top">
                <a href="" class="icon-GoOutsideLogo">

                </a>
                <h1 class="pull-me">This Is a Test Title for Hike</h1>
                <div class="rating" data-rate="4">
                  <i class="star-1">★</i>
                  <i class="star-2">★</i>
                  <i class="star-3">★</i>
                  <i class="star-4">★</i>
                  <i class="star-5">★</i>
                </div>
              </div>
              <div class="panel">
                <ul>
                  <li>
                    <p>This is a brief description of a hike and what it's all about</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="activity_list_item">
              <div class="activity_list_item_top">
                <a href="" class="icon-GoOutsideLogo">

                </a>
                <h1 class="pull-me">This Is a Test Title for Hike</h1>
                <div class="rating" data-rate="3">
                  <i class="star-1">★</i>
                  <i class="star-2">★</i>
                  <i class="star-3">★</i>
                  <i class="star-4">★</i>
                  <i class="star-5">★</i>
                </div>
              </div>
              <div class="panel">
                <ul>
                  <li>
                    <p>This is a brief description of a hike and what it's all about</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="activity_list_item">
              <div class="activity_list_item_top">
                <a href="" class="icon-GoOutsideLogo">

                </a>
                <h1 class="pull-me">This Is a Test Title for Hike</h1>
                <div class="rating" data-rate="2">
                  <i class="star-1">★</i>
                  <i class="star-2">★</i>
                  <i class="star-3">★</i>
                  <i class="star-4">★</i>
                  <i class="star-5">★</i>
                </div>
              </div>
              <div class="panel">
                <ul>
                  <li>
                    <p>This is a brief description of a hike and what it's all about!</p>
                    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent sem velit, convallis vel blandit eget, rutrum ut lorem. Vestibulum at velit quis sem mattis vulputate.</p>
                  </li>
                </ul>
              </div>
            </div>
            <div class="activity_list_item">
              <div class="activity_list_item_top">
                <a href="" class="icon-GoOutsideLogo">

                </a>
                <h1 class="pull-me">This Is a Test Title for Hike</h1>
                <div class="rating" data-rate="1">
                  <i class="star-1">★</i>
                  <i class="star-2">★</i>
                  <i class="star-3">★</i>
                  <i class="star-4">★</i>
                  <i class="star-5">★</i>
                </div>
              </div>
              <div class="panel">
                <ul>
                  <li>
                    <p>This is a brief description of a hike and what it's all about</p>
                  </li>
                </ul>
              </div>
            </div>

          </section>
        </section>
      </article>
    </div>
</div>
    <!--<script>
      var responsePromise = $http.get('/api/v1/notes4');
      console.log(responsePromise);
    </script>
    <script type="text/javascript">
        console.log("Entering the script...");
        var data; 
        $.ajax({
          url: '/api/v1/notes4',
          async: false,
          dataType: 'json',
          success: function (response) {
            data = response; 
            console.log(data);
          }
        });
        console.log(data);

        var map = L.map('activity_map').setView([49, -120], 7);

        L.tileLayer('http://server.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}', {
            attribution: 'Tiles &copy; Esri &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC',
            id: 'examples.map-20v6611k'
        }).addTo(map);

        var points = L.geoJson(data, {
            onEachFeature: function (feature, layer) {
              var popupOptions = {maxWidth: 200};
              var popupContent = feature.properties.name + "<br />" + feature.properties.lat + ", " + feature.properties.lng;
              layer.bindPopup(popupContent,popupOptions);
            }   
        });
        
        function locateUser(){
            map.locate({setView: true, maxZoom: 12}); 
        };
        map.on('locationfound', onLocationFound);
        function onLocationFound(e) {
            console.log("Found location!");
            console.log(e.latlng);
            $.get(
          "notes5",
          { paramOne : e.latlng.lat, paramTwo : e.latlng.lng},
          function(data2) {
            //alert('page content: ' + data2);
            console.log(data2);
            var hikesArray = [];
            for (var i = 0; i < data2.length; i++) {
              console.log(data2[i].geometry.coordinates);
              hikesArray.push(data2[i].geometry.coordinates[1],data2[i].geometry.coordinates[0]);
              var mark = L.marker([data2[i].geometry.coordinates[1],data2[i].geometry.coordinates[0]]).addTo(map);
              //var pointer = L.marker([ 47.63, 122.3 ]).addTo(map);

                  var popupOptions = {maxWidth: 200};
                  var popupContent =  data2[i].properties.name + "<br />" + data2[i].properties.lat + ", " +  data2[i].properties.lng;
                  mark.bindPopup(popupContent,popupOptions);
            }
            //map.setExtent(data2.getExtent());
          //var group = new L.featureGroup(data2);
          console.log(hikesArray);
          var bounds = L.latLngBounds(hikesArray);
          console.log(bounds);
          //map.fitBounds(bounds.getBounds());
          //map.fitBounds(bounds);//works!

            //map.fitBounds(data2);
          }
      );

        }
        locateUser();
        //map.addLayer(points);
    </script>-->